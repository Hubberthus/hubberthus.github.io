<!DOCTYPE html>
<html lang="en">

	<head>
	  <meta charset="utf-8">
	  <meta http-equiv="X-UA-Compatible" content="IE=edge">
	  <meta name="viewport" content="width=device-width, initial-scale=1">
	  <link href="css/bootstrap.min.css" rel="stylesheet" />
	  <link href="css/bootstrap-theme.min.css" rel="stylesheet" />
	  <link href="css/main.css" rel="stylesheet" />
	  <title>MCU setup</title>
	</head>
	
	<body>
	
		<div ng-controller="mcuSetupController" class="container-fluid">
			<div class="row">
				<div class="col-sm-3 panel-group">
					<div class="panel panel-info">
						<div class="panel-heading">Peripherals</div>
						<div class="panel-body" id="peripherals">

							<div ng-repeat="peripheral in core.peripherals" class="panel">

								<div class="panel-heading" style="background: {{peripheral.color}};">
									<h5 class="panel-title collapsed" data-toggle="collapse" href="#collapse{{peripheral.name}}">
										{{peripheral.name}}
										<span class="glyphicon {{(peripheral.enabled ? 'glyphicon-ok' : 'glyphicon-remove')}}"></span>
									</h5>
								</div>
								<div class="panel-collapse collapse" id="collapse{{peripheral.name}}">
									<div>
										{{peripheral.description}}
									</div>
									
									<div ng-repeat="(pinname, pinnums) in peripheral.pins_optional">
										<span class="pin-name">
											{{pinname}}
										</span>
										<div class="dropdown">
											<button class="btn btn-default dropdown-toggle" type="button" id="dropdown{{pinname}}" data-toggle="dropdown">
											    ---
												<span class="caret"></span>
											</button>
											<ul class="dropdown-menu">
												<li>
													<a href="#">---</a>
												</li>
												<li ng-repeat="pin in pinnums">
													<a href="#">{{active_module.pin_map[pin]}}</a>
												</li>
											</ul>
										</div>
									</div>
									
									<button ng-click="peripheral.enabled = ! peripheral.enabled" class="btn btn-default" style="{{(peripheral.name == 'GPIO' ? 'display: none;' : '')}};">
										{{(peripheral.enabled ? "disable" : "enable")}}
									</button>
								</div>
							</div>
							
						</div>
					</div>
				</div>
				<div class="col-sm-9" id="module">
				
					<img src="{{active_module.image}}" class="module-image"></img>
					
					<div ng-repeat="pin in active_module.pins" class="label-pin-{{pin.side}}" style="top: {{pin.position}}%;">
						<div ng-if="pin.name" class="label" style="background: {{pin.color}};">
							{{pin.name}}
						</div>
						
						<div ng-if="!pin.name"> 
							<div ng-repeat="peripheral in core.peripherals" style="display:inline-block;">
								<div ng-repeat="(peripinname,peripin) in peripheral.pins">
									<span ng-if="(peripin[0] == pin.number) && (peripheral.enabled)" class="label" style="background: {{peripheral.color}};">
										{{peripinname}}
									</span>
								</div>
							</div>
						</div>
					</div>
				
				</div>
			</div>
		
		</div>
		
		<script data-main="config" src="lib/require.js"></script>
	
	</body>
</html>

